const express = require('express');
const router = express.Router();
const { Pool } = require('pg');
const pool = new Pool({ /* configuración de conexión */ });

router.post('/login', async (req, res) => {
    const { usuario, clave } = req.body;

    // ❌ VULNERABLE A SQL INJECTION
    const query = `SELECT * FROM usuarios WHERE usuario = '${usuario}' AND clave = '${clave}'`;

    try {
        const result = await pool.query(query);
        if (result.rows.length > 0) {
            res.send('✅ Acceso concedido');
        } else {
            res.send('❌ Usuario o clave incorrectos');
        }
    } catch (err) {
        res.send('⚠️ Error en el servidor');
    }
});
